(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},131:function(e,t){},134:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(8),r=a.n(i),s=a(17),l=a(18),c=a(24),u=a(19),m=a(23),d=(a(101),a(41)),h=a(191),g=a(192),f=a(193),k=a(35),p=a(187),v=a(85),w=a.n(v),E=a(194),b=a(190),y=a(81),j=a.n(y),N=a(177),O=a(180),S=a(183),C=a(181),_=a(182),I=a(84),T=a.n(I),V=(a(134),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).getHeader=function(e){var t="";switch(console.log("\u5934\u50cf:",e),e){case"1":t="/imgs/head_1.jpeg";break;case"2":t="/imgs/head_2.jpeg";break;case"3":t="/imgs/head_3.jpeg";break;case"4":t="/imgs/head_4.jpeg";break;case"5":t="/imgs/head_5.jpeg";break;default:t="/imgs/head_6.jpeg"}return t},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.dataList;return o.a.createElement(N.a,null,t.map((function(t){return o.a.createElement(O.a,{key:t.key,className:t.nickname===window.sessionStorage.getItem("nickName")?"my-message":"people-message"},o.a.createElement(C.a,null,o.a.createElement(_.a,{src:e.getHeader(t.headerValue)},o.a.createElement(T.a,null))),o.a.createElement(S.a,{secondary:t.text}))})))}}]),t}(n.Component)),D=a(188),x=a(197),L=a(189),M=a(185),W=a(186),q=a(184),J=a(195),H=(a(140),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){a.setState({openDialog:!1}),a.initSocket()},a.handleOpen=function(){a.setState({openDialog:!0})},a.handleChange=function(e){var t=e.target.value;a.setState({headerValue:t})},a.initSocket=function(){a.props.initSocket()},a.saveData=function(){0===a.state.nickName.length?a.setState({showError:!0}):(a.setState({showError:!1}),window.sessionStorage.setItem("nickName",a.state.nickName),window.sessionStorage.setItem("headerValue",a.state.headerValue),a.handleClose())},a.state={openDialog:!1,showError:!1,headerValue:"1",nickName:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(x.a,{open:this.state.openDialog,"aria-labelledby":"form-dialog-title",className:"dialog-login"},o.a.createElement(q.a,{id:"form-dialog-title"},"\u521d\u59cb\u8bbe\u7f6e"),o.a.createElement(M.a,null,o.a.createElement(W.a,null,"\u8bf7\u9009\u62e9\u60a8\u7684\u5934\u50cf."),o.a.createElement("table",{border:"0"},o.a.createElement("tbody",null,o.a.createElement("tr",null,[{key:"1",value:"/imgs/head_1.jpeg"},{key:"2",value:"/imgs/head_2.jpeg"},{key:"3",value:"/imgs/head_3.jpeg"},{key:"4",value:"/imgs/head_4.jpeg"},{key:"5",value:"/imgs/head_5.jpeg"},{key:"6",value:"/imgs/head_6.jpeg"}].map((function(t){return o.a.createElement("td",{key:t.key},o.a.createElement(J.a,{checked:e.state.headerValue===t.key,onChange:e.handleChange,value:t.key,name:"radio-button-demo"}),o.a.createElement(_.a,{alt:"",src:t.value}))}))))),o.a.createElement(D.a,{fullWidth:!0},o.a.createElement(E.a,{required:!0,fullWidth:!0,label:"\u6635\u79f0",name:"nickName",ref:"nickName",defaultValue:this.state.nickName,error:this.state.showError,onChange:function(t){e.setState({nickName:t.target.value})}}))),o.a.createElement(L.a,null,o.a.createElement(b.a,{onClick:this.handleClose},"\u53d6\u6d88"),o.a.createElement(b.a,{color:"primary",onClick:this.saveData},"\u786e\u5b9a"))))}}]),t}(n.Component)),U={show:function(e,t){if(window.Notification)if("granted"===Notification.permission)new Notification(e,t);else"default"===Notification.permission?Notification.requestPermission().then((function(a){if("granted"===a){console.log("\u7528\u6237\u540c\u610f\u6388\u6743");new Notification(e,t)}else"default"===a?console.warn("\u7528\u6237\u5173\u95ed\u6388\u6743 \u672a\u5237\u65b0\u9875\u9762\u4e4b\u524d \u53ef\u4ee5\u518d\u6b21\u8bf7\u6c42\u6388\u6743"):console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743 \u4e0d\u80fd\u663e\u793a\u901a\u77e5")})):console.log("\u7528\u6237\u66fe\u7ecf\u62d2\u7edd\u663e\u793a\u901a\u77e5");else console.log("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u901a\u77e5")}};a(141);window.socket=j()("/");var B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).sendMessage=function(e){var t={key:(new Date).getTime(),headerValue:window.sessionStorage.getItem("headerValue"),nickname:window.sessionStorage.getItem("nickName"),text:e};window.socket.emit("sentToServer",JSON.stringify(t))},a.addMessageToList=function(e){var t=a.state.listItems;t.push(e),a.setState({listItems:t}),setTimeout((function(){document.querySelector(".contain-list").scrollTop=9999999}),500),U.show("Leebbs",{body:"\u60a8\u6709\u4e00\u6761\u65b0\u7684\u6d88\u606f",requireInteraction:!0})},a.initSocket=function(){var e=Object(d.a)(a);window.socket.on("sendToClient",(function(t){console.log("\u53d1\u9001\u4fe1\u606f"),e.addMessageToList(JSON.parse(t))})),window.socket.on("addUserCount",(function(t){console.log("\u7528\u6237\u4e0a\u7ebf\u4e86");var a=e.state.userCount+1;e.setState({userCount:a})})),window.socket.on("subUserCount",(function(t){console.log("\u7528\u6237\u4e0b\u7ebf\u4e86");var a=e.state.userCount-1;e.setState({userCount:a<0?0:a})})),window.socket.emit("addUserCount",1)},a.state={userCount:0,showLogin:!1,listItems:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"enterText",value:function(e){var t=e.target.value;13===e.which&&(this.sendMessage(t),e.target.value="")}},{key:"componentDidMount",value:function(){this.refs.login.handleOpen()}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{fixed:!0,className:"main-container"},o.a.createElement(g.a,{position:"static",className:"app-title"},o.a.createElement(f.a,null,o.a.createElement(p.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(w.a,null)),o.a.createElement(k.a,{variant:"h6",className:"typo-title"},"Hello \u697d"),o.a.createElement(b.a,{color:"inherit"},"\u5728\u7ebf\u4eba\u6570\uff1a",this.state.userCount))),o.a.createElement("div",{className:"contain-list"},o.a.createElement(V,{dataList:this.state.listItems})),o.a.createElement("div",{className:"footer"},o.a.createElement(E.a,{fullWidth:!0,placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5185\u5bb9",multiline:!0,rows:"1",margin:"none",variant:"outlined",onKeyPress:function(t){e.enterText(t)}}))),o.a.createElement(H,{ref:"login",initSocket:this.initSocket}))}}]),t}(n.Component),P=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(B,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,t,a){e.exports=a(142)}},[[96,1,2]]]);
//# sourceMappingURL=main.9d530630.chunk.js.map